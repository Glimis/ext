<!DOCTYPE html><html><head> 
  <link href="./../css/main.css" rel="stylesheet" type="text/css" /> 
  <script type="text/javascript" src="./../gwtproject/gwtproject.nocache.js"></script> 
  <script type="text/javascript" src="./../ace/ace.js"></script> 
  <link rel="icon" type="image/x-icon" href="./../favicon.ico" /> 
  <script type="text/javascript" src="http://support-test.sencha.com:8080/resources/plain_html/index.js"></script> 
  <script type="text/javascript">window["_GOOG_TRANS_EXT_VER"] = "1";</script> 
  <title>Ext JS Guides | Drag and Drop</title> 
  <meta charset="UTF-8" /> 
  <script type="text/javascript" src="https://use.typekit.com/bqo8qzg.js"></script> 
 </head> 
 <body> 
  <div id="header"> 
   <a href="http://www.sencha.com"><img class="sencha-logo" src="./../images/logo.png" /></a> 
   <h1 id="current-product"><a href="#">Ext JS Guides ▼</a></h1> 
  </div> 
  <div id="content" itemscope="" itemtype="http://schema.org/Article"> 
   <div id="tpl-toc"> 
    <div id="tpl-toc-content"> 
     <ul> 
      <li class="file"><a href="../index.html" title="Guide Home">Guide Home</a></li> 
      <li class="folder"><a href="#">Ext JS 5 Api Docs</a> 
       <ul expand="true"> 
        <li class="file"><a href="../apidocs/" data-full-load="true" title="Api Docs">Ext JS 5 Api Docs</a></li> 
       </ul></li> 
      <li class="folder"><a href="#">What's New?</a> 
       <ul expand="true"> 
        <li class="file"><a href="../whats_new/release_notes.html" title="">Release Notes</a></li> 
        <li class="folder"><a href="#">5.0.1</a> 
         <ul expand="true"> 
          <li class="file"><a href="http://dev.sencha.com/ext/5.0.1/examples/index.html" data-full-load="true" title="5.0.1 Examples">5.0.1 Examples</a></li> 
          <li class="file"><a href="../whats_new/5.0.1/whats_new.html" title="What's New in Ext JS 5.0.1">What's New in Ext JS 5.0.1</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
          <li class="file"><a href="../whats_new/5.0.1/diff_changes.html" title="">Ext JS Diff Guide</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
         </ul></li> 
        <li class="folder"><a href="#">5.0.0</a> 
         <ul expand="true"> 
          <li class="file"><a href="http://dev.sencha.com/ext/5.0.0/examples/index.html" data-full-load="true" title="5.0.0 Examples">5.0.0 Examples</a></li> 
          <li class="file"><a href="../whats_new/5.0/whats_new.html" title="What's New in Ext JS 5">What's New in Ext JS 5.0.0</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
          <li class="file"><a href="../whats_new/5.0/extjs_upgrade_guide.html" title="Ext JS 5 - Upgrade Guide">Ext JS 5 - Upgrade Guide</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
          <li class="file"><a href="../../../../cmd/5.x/cmd_upgrade_guide.html" data-full-load="true" title="Sencha Cmd 5 - Upgrade Guide">Sencha Cmd 5 - Upgrade Guide</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
          <li class="file"><a href="../whats_new/5.0/charts_upgrade_guide.html" title="Charts - Upgrade Guide">Charts - Upgrade Guide</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
          <li class="file"><a href="../whats_new/5.0/diff_changes.html" title="">Ext JS Diff Guide</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
         </ul></li> 
       </ul></li> 
      <li class="folder"><a href="#">Getting Started</a> 
       <ul expand="true"> 
        <li class="file"><a href="../getting_started/welcome_to_extjs.html" title="Welcome to Ext JS">Welcome to Ext JS</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../getting_started/getting_started.html" title="Get Started">Setup &amp; Getting Started</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../getting_started/extjs_faq.html" title="">Ext JS - FAQ</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
       </ul></li> 
      <li class="folder"><a href="#">Tutorials</a> 
       <ul expand="true"> 
        <li class="file"><a href="../tutorials/login_app.html" title="">Building a Login App</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
       </ul></li> 
      <li class="folder"><a href="#">Core Concepts</a> 
       <ul expand="true"> 
        <li class="file"><a href="../core_concepts/accessibility.html" title="Accessibility">Accessibility</a></li> 
        <li class="file"><a href="../core_concepts/classes.html" title="The Class System">Class System</a></li> 
        <li class="file"><a href="../core_concepts/components.html" title="Components">Components</a></li> 
        <li class="file"><a href="../core_concepts/data_package.html" title="Data Package">Data Package</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../core_concepts/drag_drop.html" title="Drag and Drop">Drag and Drop</a></li> 
        <li class="file"><a href="../core_concepts/events.html" title="Events in Ext JS 5">Events in Ext JS 5</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../core_concepts/layouts.html" title="Layouts and Containers">Layouts and Containers</a></li> 
        <li class="file"><a href="../core_concepts/localization.html" title="Localization">Localization</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../core_concepts/memory_management.html" title="">Memory Management</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../core_concepts/rtl.html" title="Right to Left in Ext JS">Right to Left in Ext JS</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../core_concepts/tablet_support.html" title="Tablet Support">Tablet Support</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../core_concepts/theming.html" title="Theming Ext JS">Theming Ext JS</a></li> 
        <li class="file"><a href="../core_concepts/drawing.html" title="">Draw Package</a></li> 
       </ul></li> 
      <li class="folder"><a href="#">Application Architecture</a> 
       <ul expand="true"> 
        <li class="file"><a href="../application_architecture/application_architecture.html" title="Introduction to Application Architecture">Introduction to Application Architecture</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../application_architecture/view_controllers.html" title="View Controllers">View Controllers</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../application_architecture/view_models_data_binding.html" title="View Models &amp; Data Binding">View Models &amp; Data Binding</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../application_architecture/view_model_internals.html" title="View Models Internals">View Model Internals</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
        <li class="file"><a href="../application_architecture/router.html" title="Using the Router">Using the Router</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
       </ul></li> 
      <li class="folder"><a href="#">Components</a> 
       <ul expand="true"> 
        <li class="file"><a href="../components/forms.html" title="Forms">Forms</a></li> 
        <li class="file"><a href="../components/introduction_to_charting.html" title="Introduction to Charting">Introduction to Charting</a></li> 
        <li class="file"><a href="../components/trees.html" title="Trees">Trees</a></li> 
        <li class="folder"><a href="#">Grids</a> 
         <ul expand="true"> 
          <li class="file"><a href="../components/grids/grids.html" title="Grids">Grids</a></li> 
          <li class="file"><a href="../components/grids/widgets_widgets_columns.html" title="Widgets and Widget Columns">Widgets and Widget Columns</a><img class="tpl-toc-img-new" src="./../images/new.png" /></li> 
         </ul></li> 
       </ul></li> 
      <li class="folder"><a href="#">Sencha Cmd</a> 
       <ul expand="true"> 
        <li class="file"><a href="../../../../cmd/5.x/intro_to_cmd.html" data-full-load="true" title="Introduction to Sencha Cmd">Introduction to Sencha Cmd</a></li> 
        <li class="file"><a href="../../../../cmd/5.x/extjs/cmd_app.html" data-full-load="true" title="Using Sencha Cmd with Ext JS 5">Using Sencha Cmd with Ext JS 5</a></li> 
        <li class="file"><a href="../../../../cmd/5.x/cmd_upgrade.html" data-full-load="true" title="Understanding App Upgrade">Understanding App Upgrade</a></li> 
        <li class="file"><a href="../../../../cmd/5.x/cmd_compiler.html" data-full-load="true" title="Compiler-Friendly Code Guidelines">Compiler-Friendly Code Guidelines</a></li> 
        <li class="file"><a href="../../../../cmd/5.x/cordova_phonegap.html" data-full-load="true" title="Cordova and PhoneGap Applications">Cordova and PhoneGap Applications</a></li> 
        <li class="file"><a href="../../../../cmd/5.x/workspaces.html" data-full-load="true" title="Workspaces in Sencha Cmd">Workspaces in Sencha Cmd</a></li> 
        <li class="file"><a href="../../../../cmd/5.x/microloader.html" data-full-load="true" title="The Microloader">The Microloader</a></li> 
        <li class="folder"><a href="#">Sencha Cmd Packages</a> 
         <ul expand="true"> 
          <li class="file"><a href="../../../../cmd/5.x/cmd_packages/cmd_packages.html" data-full-load="true" title="Sencha Cmd Packages">Sencha Cmd Packages</a></li> 
          <li class="file"><a href="../../../../cmd/5.x/cmd_packages/cmd_creating_packages.html" data-full-load="true" title="Creating Packages">Creating Packages</a></li> 
         </ul></li> 
        <li class="folder"><a href="#">Advanced Sencha Cmd</a> 
         <ul expand="true"> 
          <li class="file"><a href="../../../../cmd/5.x/advanced_cmd/cmd_advanced.html" data-full-load="true" title="Advanced Sencha Cmd">Advanced Sencha Cmd</a></li> 
          <li class="file"><a href="../../../../cmd/5.x/advanced_cmd/cmd_build.html" data-full-load="true" title="Inside the App Build Process">Inside the App Build Process</a></li> 
          <li class="file"><a href="../../../../cmd/5.x/advanced_cmd/cmd_compiler_reference.html" data-full-load="true" title="Sencha Compiler Reference">Sencha Compiler Reference</a></li> 
          <li class="file"><a href="../../../../cmd/5.x/advanced_cmd/cmd_ant.html" data-full-load="true" title="Ant Integration">Ant Integration</a></li> 
          <li class="file"><a href="../../../../cmd/5.x/advanced_cmd/cmd_metadata.html" data-full-load="true" title="Sencha Cmd Metadata">Sencha Cmd Metadata</a></li> 
          <li class="file"><a href="../../../../cmd/5.x/advanced_cmd/cmd_reference.html" data-full-load="true" title="Sencha Cmd Reference">Sencha Cmd Reference</a></li> 
         </ul></li> 
       </ul></li> 
      <li class="folder"><a href="#">Enterprise Tools</a> 
       <ul expand="true"> 
        <li class="file"><a href="../enterprise/soap.html" title="SOAP Services">SOAP Services</a></li> 
        <li class="file"><a href="../enterprise/amf.html" title="AMF Data Sources">AMF Data Sources</a></li> 
       </ul></li> 
     </ul> 
    </div> 
   </div> 
   <div id="middle"> 
    <div id="tpl-content"> 
     <div> 
      <div class="toc-page" style="display:block;">
        Contents 
       <a class="toc-page-h2" href="#Defining_drag_and_drop" title="Defining drag and drop">Defining drag and drop</a> 
       <a class="toc-page-h2" href="#Organizing_the_drag_and_drop_classes" title="Organizing the drag and drop classes">Organizing the drag and drop classes</a> 
       <a class="toc-page-h2" href="#The_task_at_hand" title="The task at hand">The task at hand</a> 
       <a class="toc-page-h2" href="#Step_1__Starting_with_drag" title="Step 1: Starting with drag">Step 1: Starting with drag</a> 
       <a class="toc-page-h2" href="#Peeking_at_how_drag_nodes_are_affected" title="Peeking at how drag nodes are affected">Peeking at how drag nodes are affected</a> 
       <a class="toc-page-h2" href="#Step_2__Repairing_an_invalid_drop" title="Step 2: Repairing an invalid drop">Step 2: Repairing an invalid drop</a> 
       <a class="toc-page-h2" href="#Step_3__Configuring_the_drop_targets" title="Step 3: Configuring the drop targets">Step 3: Configuring the drop targets</a> 
       <a class="toc-page-h2" href="#Step_4__Completing_the_drop" title="Step 4: Completing the drop">Step 4: Completing the drop</a> 
       <a class="toc-page-h2" href="#Step_5__Adding_drop_invitation" title="Step 5: Adding drop invitation">Step 5: Adding drop invitation</a> 
       <a class="toc-page-h2" href="#It_doesn_t_stop_here" title="It doesn’t stop here">It doesn’t stop here</a> 
       <a class="toc-page-h2" href="#Summary" title="Summary">Summary</a> 
       <a class="toc-page-h2" href="#Author" title="Author">Author</a> 
      </div> 
      <div id="tpl-content-name" itemprop="name"> 
       <h1>Drag and Drop</h1> 
      </div> 
      <div id="tpl-content-articleBody" itemprop="articleBody"> 
       <p>One of the most powerful interaction design patterns available to developers is “Drag and Drop.” We utilize Drag and Drop without really giving it much thought - especially when its done right. Here are 5 easy steps to ensure an elegant implementation.</p> 
       <h2 id="Defining_drag_and_drop">Defining drag and drop</h2> 
       <p>A drag operation, essentially, is a click gesture on some UI element while the mouse button is held down and the mouse is moved. A drop operation occurs when the mouse button is released after a drag operation. From a high level, drag and drop decisions can be summed up by the following flow chart.</p> 
       <p><img src="images/dnd_drag_logic.jpg" alt="Ext Drag and Drop" /></p> 
       <p>To speed up our development, Ext JS provides us with the Ext.dd classes to manage the basic decisions for us. In this guide, we will cover coding for the appearance and removal of the drop invitation, invalid drop repair and what happens when a successful drop occurs.</p> 
       <h2 id="Organizing_the_drag_and_drop_classes">Organizing the drag and drop classes</h2> 
       <p>A first glance of the classes in the Ext.dd documentation might seem a bit intimidating. But, if we take a quick moment to look at the classes, we see that they all stem from the DragDrop class and most can be categorized into Drag or Drop groups. With a bit more time and digging, we can see that the classes can be further categorized into single node and multiple node drag or drop interactions.</p> 
       <p><img src="images/diagram.jpg" alt="Ext Drag and Drop" /></p> 
       <p>In order to learn about the basics of drag and drop we’ll focus on applying single drag and drop interactions to DOM nodes. To do this, we’ll utilize the DD and DDTarget classes, which provide the base implementations for their respective drag and drop behaviors. However, we need to discuss what our objectives are before we can start implementing drag and drop.</p> 
       <h2 id="The_task_at_hand">The task at hand</h2> 
       <p>Lets say we’ve been asked to develop an application that will provide a rental car company the ability to place their cars and trucks in one of three states: available, rented or in repair status. The cars and trucks are only allowed to be placed in their respective “available” container.</p> 
       <p><img src="images/dnd_story.jpg" alt="Ext Drag and Drop" /></p> 
       <p>To get started, we must make the cars and trucks “dragable”. For this, we’ll use DD. We’ll need to make the rented, repair and vehicle containers “drop targets”. For this we’ll use DDTarget. Lastly, we’ll use different drag drop groups to help enforce the requirement that cars and trucks can only be dropped into their respective “available” containers. Now we can begin coding by adding drag operations to the cars and trucks.</p> 
       <h2 id="Step_1__Starting_with_drag">Step 1: Starting with drag</h2> 
       <p>To configure the vehicle DIVs elements as dragable, we’ll need to obtain a list and loop through it to instantiate new instances of DD. Here’s how we do it.</p> 
       <pre mode="javascript" theme="chrome"><code>Ext.onReady(function() {
        // Create an object that we'll use to implement and override drag behaviors a little later

        var overrides = {};

        // Configure the cars to be draggable
        var carElements = Ext.get('cars').select('div');
        Ext.each(carElements.elements, function(el) {
            var dd = Ext.create('Ext.dd.DD', el, 'carsDDGroup', {
                isTarget  : false
            });
            //Apply the overrides object to the newly created instance of DD
            Ext.apply(dd, overrides);
        });

        var truckElements = Ext.get('trucks').select('div');
        Ext.each(truckElements.elements, function(el) {
            var dd = Ext.create('Ext.dd.DD', el, 'trucksDDGroup', {
                isTarget  : false
            });
            Ext.apply(dd, overrides);
        });
    });</code></pre> 
       <p>All drag and drop classes are designed to be implemented by means of overriding its methods. That’s why in the above code segment, we have create an empty object called overrides, which will be filled in later with overrides specific to the action we need. We get of list of car and truck elements by leveraging the DomQuery select method to query the cars container for all the child div elements. To make the cars and truck elements dragable, we create a new instance of DD, passing in the car or truck element to be dragged and the drag drop group that it is to participate in. Notice that the vehicle types have their own respective drag drop group. This will be important to remember later when we setup the rented and repair containers as drop targets. Also notice that we’re applying the overrides object to the newly created instances of DD using Ext.apply., which is a handy way to add properties or methods to an existing object. Before we can continue with our implementation, we need to take a quick moment to analyze what happens when you drag an element on screen. With this understanding, the rest of the implementation will fall into place.</p> 
       <h2 id="Peeking_at_how_drag_nodes_are_affected">Peeking at how drag nodes are affected</h2> 
       <p>The first thing you’ll notice when dragging the car or truck elements around is that they will stick wherever they are dropped. This is OK for now because we’ve just begun our implementation. What is important is to understand how the drag nodes are being affected. This will aid us in coding for the return to their original positions when they are dropped on anything that is not a valid drop target, which is known as an “invalid drop”. The below illustration uses FireBug’s HTML inspection panel and highlights the changes being made by when a drag operation is applied to the Camaro element.</p> 
       <p><img src="images/dnd_inspection.jpg" alt="Ext Drag and Drop" /></p> 
       <p>While inspecting the drag element during a drag operation, we can see a style attribute added to the element with three CSS values populated: position, top and left. Further inspection reveals that the position attribute set to relative and top and left attributes updating while the node is being dragged around. After a the drag gesture completes, the style attribute remains along with the styles contained therein. This is what we have to clean up when we code for the repair of an invalid drop. Until we setup proper drop targets, all drop operations are considered invalid.</p> 
       <h2 id="Step_2__Repairing_an_invalid_drop">Step 2: Repairing an invalid drop</h2> 
       <p>The path of least resistance is to repair an invalid drop by reseting the style attribute that is applied during the drag operation. This means that the drag element would disappear from under the mouse and reappear where it originated and would be quite boring. To make it smoother, we’ll use Ext.Fx to animate this action. Remember that the drag and drop classes were designed to have methods overridden. To implement repair, we’ll need to override the b4StartDrag, onInvalidDrop and endDrag methods. Lets add the following methods to our overrides object above and we’ll discuss what they are and do.</p> 
       <pre mode="javascript" theme="chrome"><code>var overrides = {
        // Called the instance the element is dragged.
        b4StartDrag : function() {
            // Cache the drag element
            if (!this.el) {
                this.el = Ext.get(this.getEl());
            }

            //Cache the original XY Coordinates of the element, we'll use this later.
            this.originalXY = this.el.getXY();
        },
        // Called when element is dropped in a spot without a dropzone, or in a dropzone without matching a ddgroup.
        onInvalidDrop : function() {
            // Set a flag to invoke the animated repair
            this.invalidDrop = true;
        },
        // Called when the drag operation completes
        endDrag : function() {
            // Invoke the animation if the invalidDrop flag is set to true
            if (this.invalidDrop === true) {
                // Remove the drop invitation
                this.el.removeCls('dropOK');

                // Create the animation configuration object
                var animCfgObj = {
                    easing   : 'elasticOut',
                    duration : 1,
                    scope    : this,
                    callback : function() {
                        // Remove the position attribute
                        this.el.dom.style.position = '';
                    }
                };

                // Apply the repair animation
                this.el.setXY(this.originalXY[0], this.originalXY[1], animCfgObj);
                delete this.invalidDrop;
            }
        },</code></pre> 
       <p>In the above code, we begin by overriding the b4StartDrag method, which is called the instant the drag element starts being dragged around screen and makes it an ideal place to cache the drag element and original XY coordinates - which we will use later on in this process. Next, we override onInvalidDrop, which is is called when a drag node is dropped on anything other than a drop target that is participating in the same drag drop group. This override simply sets a local invalidDrop property to true, which will be used in the next method. The last method we override is endDrag, which is called when the drag element is no longer being dragged around screen and the drag element is no longer being controlled by the mouse movements. This override will move the drag element back to its original X and Y position using animation. We configured the animation to use the elasticOut easing to provide a cool and fun bouncy effect at end of the animation.</p> 
       <p><img src="images/dnd_camaro_repair.jpg" alt="Ext Drag and Drop" /></p> 
       <p>OK, now we have the repair operation complete. In order for it to work on the drop invitation and valid drop operations, we need to setup the drop targets.</p> 
       <h2 id="Step_3__Configuring_the_drop_targets">Step 3: Configuring the drop targets</h2> 
       <p>Our requirements dictate that we will allow cars and trucks to be in be dropped in the rented and repair containers as well as their respective original containers. To do this, we’ll need to instantiate instances of the DDTarget class. Here’s how its done.</p> 
       <pre mode="javascript" theme="chrome"><code>// Instantiate instances of Ext.dd.DDTarget for the cars and trucks container
var carsDDTarget = Ext.create('Ext.dd.DDTarget', 'cars','carsDDGroup');
var trucksDDTarget = Ext.create('Ext.dd.DDTarget', 'trucks', 'trucksDDGroup');

// Instantiate instances of DDTarget for the rented and repair drop target elements
var rentedDDTarget = Ext.create('Ext.dd.DDTarget', 'rented', 'carsDDGroup');
var repairDDTarget = Ext.create('Ext.dd.DDTarget', 'repair', 'carsDDGroup');

// Ensure that the rented and repair DDTargets will participate in the trucksDDGroup
rentedDDTarget.addToGroup('trucksDDGroup');
repairDDTarget.addToGroup('trucksDDGroup');</code></pre> 
       <p>In the above code snippet, we have setup drop targets for the cars, trucks, rented and repair elements. Notice that the cars container element only participates in the “carsDDGroup” and the trucks container element participates in the “trucksDDGroup”. This helps enforce the requirement that cars and trucks can only be dropped in their originating container. Next, we instantiate instances DDTarget for the rented and repair elements. Initially, they are configured to only participate in the “carsDDGroup”. In order to allow them to participate in the “trucksDDGroup”, we have to add it by means of addToGroup. OK, now we’ve configured our drop targets. Lets see what happens when we drop the cars or trucks on a valid drop element.</p> 
       <p><img src="images/dnd_drops_no_onDragDrop.jpg" alt="Ext Drag and Drop" /></p> 
       <p>In exercising the drop targets, we see that the drag element stays exactly its dropped. That is, images can be dropped anywhere on a drop target and stay there. This means that our drop implementation is not complete. To complete it, we need to actually code for the “complete drop” operation, by means of another override for the instances of DD that we created some time ago.</p> 
       <h2 id="Step_4__Completing_the_drop">Step 4: Completing the drop</h2> 
       <p>To complete the drop, we will need to actually drag the element from its parent element to the drop target element using DOM tools. This is accomplished by overriding the DD onDragDrop method. Add the following method to the overrides object.</p> 
       <pre mode="javascript" theme="chrome"><code>var overrides = {
    ...
    // Called upon successful drop of an element on a DDTarget with the same
    onDragDrop : function(evtObj, targetElId) {
        // Wrap the drop target element with Ext.Element
        var dropEl = Ext.get(targetElId);

        // Perform the node move only if the drag element's
        // parent is not the same as the drop target
        if (this.el.dom.parentNode.id != targetElId) {

            // Move the element
            dropEl.appendChild(this.el);

            // Remove the drag invitation
            this.onDragOut(evtObj, targetElId);

            // Clear the styles
            this.el.dom.style.position ='';
            this.el.dom.style.top = '';
            this.el.dom.style.left = '';
        }
        else {
            // This was an invalid drop, initiate a repair
            this.onInvalidDrop();
        }
    },</code></pre> 
       <p>In the above override, the drag element is moved to the drop target element, but only if it is not the same as the drag element’s parent node. After the drag element is moved, the styles are cleared from it. If the drop element is the same as the drag element’s parent, we ensure a repair operation occurs by calling this.onInvalidDrop.</p> 
       <p><img src="images/drag_and_drop_working_without_invitation.jpg" alt="Ext Drag and Drop" /></p> 
       <p>Upon a successful drop, the drag elements will now will be moved from their parent element to the drop target. How does the user know if they are hovering above a valid drop target? We’ll give the user some visual feedback by configuring the drop invitation.</p> 
       <h2 id="Step_5__Adding_drop_invitation">Step 5: Adding drop invitation</h2> 
       <p>In order to make drag and drop a bit more useful, we need to provide feedback to the user on whether or not a drop operation can successfully occur. This means that we’ll have to override the onDragEnter and onDragOut methods Add these last two methods to the overrides object.</p> 
       <pre mode="javascript" theme="chrome"><code>var overrides = {
        ...
        // Only called when the drag element is dragged over the a drop target with the
same ddgroup
        onDragEnter : function(evtObj, targetElId) {
            // Colorize the drag target if the drag node's parent is not the same as the
drop target
            if (targetElId != this.el.dom.parentNode.id) {
                this.el.addCls('dropOK');
            }
            else {
                // Remove the invitation
                this.onDragOut();
            }
        },
        // Only called when element is dragged out of a dropzone with the same ddgroup
        onDragOut : function(evtObj, targetElId) {
            this.el.removeCls('dropOK');
        }
    };</code></pre> 
       <p>In the above code, we override the onDragEnter and onDragOut methods, both of which are only utilized when the drag element is interacting with a drop target participating in the same drag drop group. The onDragEnter method is only called when the mouse cursor first intersects the boundaries of a drop target while a drag item is in drag mode. Likewise, onDragOut is called when the mouse cursor is first dragged outside the boundaries of the drop target while in drag mode.</p> 
       <p><img src="images/drag_and_drop_working_with_invitation.jpg" alt="Ext Drag and Drop" /></p> 
       <p>By adding overrides to the onDragEnter and onDragOut methods we can see that the background of the drag element will turn green when the mouse cursor first intersects a valid drop target and will lose its green background when it leaves the drop target or is dropped. This completes our implementation of drag and drop with DOM elements.</p> 
       <h2 id="It_doesn_t_stop_here">It doesn’t stop here</h2> 
       <p>Drag and drop can be a can be applied to mostly everything in the Ext JS framework. Here are a few examples that you can use to learn how to implement drag and drop with various widgets:</p> 
       <ul> 
        <li><a href="http://dev.sencha.com/ext/5.0.0/examples/kitchensink/#dd-grid-to-grid">GridPanel to GridPanel</a></li> 
        <li><a href="http://dev.sencha.com/ext/5.0.0/examples/kitchensink/#dd-grid-to-form">Grid to FormPanel</a></li> 
        <li><a href="http://dev.sencha.com/ext/5.0.0/examples/kitchensink/#dd-field-to-grid">Ext.form.Field to GridPanel cell</a></li> 
        <li><a href="http://dev.sencha.com/ext/5.0.0/examples/dd/dragdropzones.html">Use of DragZone and DropZone</a></li> 
       </ul> 
       <h2 id="Summary">Summary</h2> 
       <p>Today, we learned how to implement end to end drag and drop of DOM nodes using the first-level drag and drop implementation classes. From a high-level, we defined and discussed what drag and drop is and how to think about it in terms of the framework. We also learned that the drag and drop classes can be grouped by drag or drop behaviors and whether or not they support single or multiple drag or drop operations. While implementing this behavior, we illustrated that the dd classes help make some of the behavioral decisions, and that we are responsible for coding the end-behaviors. We hope you’ve enjoyed this thorough look at some fundamental drag and drop operations with DOM nodes. We look forward to bringing you more articles about this topic in the future.</p> 
       <h2 id="Author">Author</h2> 
       <p><em>Written by Jay Garcia</em></p> 
       <p>Mr. Garcia is the author of Ext JS in Action and Sencha Touch in Action. He has been an evangelist of Sencha-based JavaScript frameworks since 2006. Jay is also Co-Founder and CTO of Modus Create, a digital agency focused on leveraging top talent to develop high quality Sencha-based applications. Modus Create is a Sencha Premier partner.</p> 
      </div> 
      <div class="tpl-content-lastUpdated">
        Last updated 
       <div id="tpl-content-lastUpdated-date" itemprop="datePublished" datetime="2014-08-26T12:33Z">
         August 26, 2014 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div id="footer"> 
   <div id="footer-social"> 
    <div class="g-plusone" data-size="medium" data-annotation="none"></div> 
   </div> 
   <div id="footer-content"> 
    <a href="http://www.sencha.com/products">Products</a> | 
    <a href="http://www.sencha.com/services">Services</a> | 
    <a href="http://www.sencha.com/support">Support</a> | 
    <a href="http://www.sencha.com/training">Training</a> | 
    <a href="http://www.sencha.com/partners">Partners</a> | 
    <a href="http://www.sencha.com/blog">Community</a> | 
    <a href="http://www.sencha.com/company">Company</a> 
   </div> 
  </div> 
  <div id="menu-product-container" style="display:none;"> 
   <div id="menu-dropdown"> 
    <div class="menu-landing-products"> 
     <div id="menu-vertical"> 
      <p class="menu-landing-product" rel="extjs"> <a> Ext JS </a> </p> 
      <p class="menu-landing-product" rel="architect"> <a> Architect </a> </p> 
      <p class="menu-landing-product" rel="touch"> <a> Touch </a> </p> 
      <p class="menu-landing-product" rel="cmd"> <a> Sencha Cmd </a> </p> 
      <p class="menu-landing-product" rel="touchazure"> <a> Touch Azure </a> </p> 
      <p class="menu-landing-product" rel="gxt"> <a> GXT </a> </p> 
      <p class="menu-landing-product" rel="space"> <a> Space </a> </p> 
      <p class="menu-landing-product" rel="src"> <a> src.sencha.io </a> </p> 
      <p class="menu-landing-product" rel="animator"> <a> Animator </a> </p> 
     </div> 
    </div> 
    <div id="menu-product-details"> 
     <div id="extjs-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        5.0.x 
      </div> 
      <a href="../.././../extjs/5.0/"> 5.0.1 </a> 
      <a class="menu-landing-zip" href="../.././../downloads/ext-docs-5.0.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        4.2.x 
      </div> 
      <a href="../.././../extjs/4.2.2/"> 4.2.2 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/extjs-docs-4.2.2.zip"> zip </a> 
      <br /> 
      <a href="../.././../extjs/4.2.1/"> 4.2.1 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/extjs-docs-4.2.1.zip"> zip </a> 
      <br /> 
      <a href="../.././../extjs/4.2.0/"> 4.2.0 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/extjs-docs-4.2.0.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        4.1.x 
      </div> 
      <a href="../.././../extjs/4.1.3/"> 4.1.3 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/extjs-docs-4.1.3.zip"> zip </a> 
      <br /> 
      <a href="../.././../extjs/4.1.2/"> 4.1.2 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/extjs-docs-4.1.2.zip"> zip </a> 
      <br /> 
      <a href="../.././../extjs/4.1.1/"> 4.1.1 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/extjs-docs-4.1.1.zip"> zip </a> 
      <br /> 
      <a href="../.././../extjs/4.1.0/"> 4.1.0 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/extjs-docs-4.1.0.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        4.0.x 
      </div> 
      <a href="../.././../extjs/4.0.7/"> 4.0.7 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/extjs-docs-4.0.7.zip"> zip </a> 
      <br /> 
      <a href="../.././../extjs/4.0.0/"> 4.0.0 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/extjs-docs-4.0.0.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-recent-version">
        Most Recent 
       <div class="menu-landing-most-recent"> 
        <a href="../.././../extjs/5.0/">5.0.1</a> 
       </div> 
      </div> 
     </div> 
     <div id="architect-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        3.x 
      </div> 
      <a href="../.././../architect/3/"> 3.1 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/architect-docs-3.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        2.x 
      </div> 
      <a href="../.././../architect/2/"> 2 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/architect-docs-2.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-recent-version">
        Most Recent 
       <div class="menu-landing-most-recent"> 
        <a href="../.././../architect/3/">3.1</a> 
       </div> 
      </div> 
     </div> 
     <div id="touch-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        2.4.x 
      </div> 
      <a href="../../.././../touch/2.4.0/"> 2.4.0 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-2.4.0.zip"> zip </a> 
      <div class="menu-landing-doc-heading">
        2.3.x 
      </div> 
      <a href="../../.././../touch/2.3.1/"> 2.3.1 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-2.3.1.zip"> zip </a> 
      <br /> 
      <a href="../../.././../touch/2.3.0/"> 2.3.0 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-2.3.0.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        2.2.x 
      </div> 
      <a href="../../.././../touch/2.2.1/"> 2.2.1 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-2.2.1.zip"> zip </a> 
      <br /> 
      <a href="../../.././../touch/2.2.0/"> 2.2.0 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-2.2.0.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        2.1.x 
      </div> 
      <a href="../.././../touch/2.1.1/"> 2.1.1 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-2.1.1.zip"> zip </a> 
      <br /> 
      <a href="../.././../touch/2.1.0/"> 2.1.0 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-2.1.0.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        2.0.x 
      </div> 
      <a href="../../.././../touch/2.0.2/"> 2.0.2 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-2.0.2.zip"> zip </a> 
      <br /> 
      <a href="../../.././../touch/2.0.1/"> 2.0.1 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-2.0.1.zip"> zip </a> 
      <br /> 
      <a href="../../.././../touch/2.0.0/"> 2.0.0 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-2.0.0.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        1.1.x 
      </div> 
      <a href="../../.././../touch/1.1.1/"> 1.1.1 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-1.1.1.zip"> zip </a> 
      <br /> 
      <a href="../../.././../touch/1.1.0/"> 1.1.0 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/touch-docs-1.1.0.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-recent-version">
        Most Recent 
       <div class="menu-landing-most-recent"> 
        <a href="../../.././../touch/2.4.0/">2.4.0</a> 
       </div> 
      </div> 
     </div> 
     <div id="cmd-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        5.x 
      </div> 
      <a href="../.././../cmd/"> 5.x </a> 
      <br /> 
      <div class="menu-landing-recent-version">
        Most Recent 
       <div class="menu-landing-most-recent"> 
        <a href="../.././../cmd/">5.x</a> 
       </div> 
      </div> 
     </div> 
     <div id="touchazure-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        1.0.x 
      </div> 
      <a href="../.././../touch-azure/1.0.0/"> 1.0.0 </a> 
      <br /> 
      <div class="menu-landing-recent-version">
        Most Recent 
       <div class="menu-landing-most-recent"> 
        <a href="../.././../touch-azure/1.0.0/">1.0.0</a> 
       </div> 
      </div> 
     </div> 
     <div id="gxt-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        3.1.x 
      </div> 
      <a href="http://www.sencha.com/examples/"> 3.1.1 Examples </a> 
      <br /> 
      <a href="http://docs.sencha.com/gxt/3.1/"> 3.1.1 Guides </a> 
      <br /> 
      <a href="http://docs.sencha.com/gxt/3.1/javadoc/index.html"> 3.1.1 Javadoc </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        3.0.x 
      </div> 
      <a href="http://docs.sencha.com/gxt-guides/3/"> 3.0.6 Guides </a> 
      <br /> 
      <a href="http://docs.sencha.com/gxt/3/"> 3.0.6 Javadoc </a> 
      <br /> 
      <div class="menu-landing-doc-heading">
        2.x 
      </div> 
      <a href="http://www.sencha.com/gxtdocs/"> 2.3.1 Javadoc </a> 
      <br /> 
      <div class="menu-landing-recent-version">
        Most Recent 
       <div class="menu-landing-most-recent"> 
        <a href="http://docs.sencha.com/gxt/3.1/">3.1.1</a> 
       </div> 
      </div> 
     </div> 
     <div id="space-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        1.0.x 
      </div> 
      <a href="../.././../space/1.0.0/"> 1.0.0 </a> 
      <br /> 
      <div class="menu-landing-recent-version">
        Most Recent 
       <div class="menu-landing-most-recent"> 
        <a href="../.././../space/1.0.0/">1.0.0</a> 
       </div> 
      </div> 
     </div> 
     <div id="src-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        1.0.x 
      </div> 
      <a href="../.././../src/1/"> 1.0.0 </a> 
      <br /> 
      <div class="menu-landing-recent-version">
        Most Recent 
       <div class="menu-landing-most-recent"> 
        <a href="../.././../src/1/">1.0.0</a> 
       </div> 
      </div> 
     </div> 
     <div id="animator-menu-product" class="menu-specific-product"> 
      <div class="menu-landing-doc-heading">
        1.x 
      </div> 
      <a href="../.././../animator/1.5/"> 1.5 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/animator-docs-1.5.zip"> zip </a> 
      <br /> 
      <a href="../.././../animator/1.3/"> 1.3 </a> 
      <a class="menu-landing-zip" href="http://cdn.sencha.com/downloads/docs/animator-docs-1.3.zip"> zip </a> 
      <br /> 
      <div class="menu-landing-recent-version">
        Most Recent 
       <div class="menu-landing-most-recent"> 
        <a href="../.././../animator/1.5/">1.5</a> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <!-- GooglePlus --> 
  <script type="text/javascript">
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/platform.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  </script> 
  <!-- Google Analytics --> 
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-1396058-24', 'guides-extjs');
    ga('send', 'pageview');
  </script> 
  <!-- Google Analytics (deprecated) --> 
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1396058-10']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>  
 
</body></html>